services:
  proxy:
    image: docker.io/traefik:v3.1.2
    ports:
      - 8080:80
      - 8443:443
      - 8888:8080
    command:
      - "--configfile=/etc/traefik/config/traefik.yaml"
    volumes:
      - ${podmansock}:/var/run/docker.sock
      - ./config/letsencrypt:/letsencrypt:rw
      - ./config/traefik/:/etc/traefik/config:ro
      # - ./config/dynamic/dynamic-conf.yaml:/dynamic-conf.yaml
    networks:
      - externa
    security_opt:
      - "label=disable"

  
  ddm:
    image: docker.io/nginx
    networks:
      - externa
    restart: always
    volumes:
      - ${pathDDM}:/usr/share/nginx/html:ro
      - ./config/nginx:/etc/nginx/conf.d:ro
    security_opt:
      - "label=disable"  

  aahu:
    image: docker.io/traefik/whoami
    networks:
      - externa
    security_opt:
      - "label=disable"

  cms:
    image: docker.io/traefik/whoami
    networks:
      - externa
    security_opt:
      - "label=disable"

networks:
  externa:
